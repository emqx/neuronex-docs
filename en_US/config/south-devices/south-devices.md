# 创建南向驱动

南向插件是实现特定协议以访问外部设备的通信驱动程序。为了实现协议格式转换，至少需要一个北向插件和一个南向插件分别用于数据传递和数据采集。本节将介绍如何添加南向设备以及不同插件的具体配置方法。

## 添加南向设备

创建南向设备节点，用于连接到真实设备或模拟器，本页面将以添加 modbus-tcp 插件为例演示具体的操作步骤。

在 **配置 -> 南向设备**，点击 **添加设备** 来创建设备节点，添加一个新的南向设备：

* 名称：此设备名称，例如 modbus-tcp-1；
* 插件：选择 modbus-tcp 插件。

## 设置南向设备参数

配置 ECP Edge 与设备建立连接所需的参数。

在右上角可以选择列表或卡片展示南向设备。点击设备列（或设备卡片）的设备配置图标进入设备配置界面：

* 设备 IP 地址：填写安装 PeakHMI Slave Simulators 软件的 PC 端 IP 地址；
* 设备端口：填写 modbus 模拟器所使用的端口，默认使用 502 端口；
* 接收超时时间：单位 ms，默认为 3,000，超过设置时间未接收到消息则报错。
* 点击**提交**，完成设备配置，设备卡片自动进入 **运行中** 的工作状态。

:::tip
每个设备所需的配置参数有所不同，详细南向设备参数说明可参考具体的驱动个页面。
:::

应用创建成功后，管理界面会出现新创建的卡片/列，该设备卡包含以下信息：

* 名称：用户指定的唯一名称。设置后，名称暂时不能修改。
* 设备配置图标：点击该按钮进入配置界面，用于设置 ECP Edge 连接时所需的参数设置。
* 数据统计图标：统计节点卡片信息。
* DEBUG 日志图标：打印节点调试日志，十分钟后恢复默认日志级别。
* 删除图标：从设备列表中删除该节点。
* 状态：显示设备节点的当前状态和五种工作状态。
  * **初始化**：首次添加南向设备/北向应用卡后，将进入初始化状态。
  * **配置中**：进入设备/应用程序配置，并进入配置状态。
  * **就绪**：配置成功后，进入就绪状态。
  * **运行中**：运行设备卡片。
  * **停止**：停止设备卡片。
* 工作状态切换按钮：打开连接设备。
  * 打开：ECP Edge 与设备/应用建立连接，开始收集数据。
  * 关闭：断开设备连接，停止收集数据。
* 连接状态：显示设备的连接状态。
  :::tip
  添加组和标签后，ECP Edge 会连接设备并开始采集数据，连接状态将显示**已连接**。
  :::
* 延迟：发送和接收指令之间的时间间隔。
* 插件：用于显示该设备使用的插件模块的名称。